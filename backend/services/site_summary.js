/**
 * Bakhmaro AI Operations Platform - Static Site Information
 * рЃ«рЃћрЃџрЃўрЃЌ рЃЏрЃЮрЃЏрЃќрЃљрЃЊрЃћрЃЉрЃБрЃџрЃў рЃЉрЃљрЃќрЃўрЃАрЃБрЃарЃў рЃўрЃюрЃцрЃЮрЃарЃЏрЃљрЃфрЃўрЃљ рЃќрЃБрЃАрЃбрЃў рЃърЃљрЃАрЃБрЃ«рЃћрЃЉрЃўрЃАрЃЌрЃЋрЃўрЃА
 */

const BAKHMARO_PLATFORM_INFO = {
  title: "рЃЉрЃљрЃ«рЃЏрЃљрЃарЃЮрЃА AI рЃЮрЃърЃћрЃарЃљрЃфрЃўрЃћрЃЉрЃўрЃА рЃърЃџрЃљрЃбрЃцрЃЮрЃарЃЏрЃљ",
  description: "рЃњрЃБрЃарЃБрЃџрЃЮрЃА рЃерЃўрЃЊрЃљ рЃЮрЃърЃћрЃарЃљрЃфрЃўрЃБрЃџрЃў рЃњрЃљрЃарЃћрЃЏрЃЮ рЃЊрЃћрЃЋрЃћрЃџрЃЮрЃърЃћрЃарЃБрЃџрЃў рЃўрЃюрЃАрЃбрЃарЃБрЃЏрЃћрЃюрЃбрЃћрЃЉрЃўрЃЌ, рЃЏрЃЮрЃюрЃўрЃбрЃЮрЃарЃўрЃюрЃњрЃўрЃЌ рЃЊрЃљ рЃБрЃАрЃљрЃцрЃарЃЌрЃ«рЃЮрЃћрЃЉрЃўрЃА рЃърЃЮрЃџрЃўрЃбрЃўрЃЎрЃћрЃЉрЃўрЃЌ",

  // рЃФрЃўрЃарЃўрЃЌрЃљрЃЊрЃў рЃЮрЃърЃћрЃарЃљрЃфрЃўрЃБрЃџрЃў рЃЊрЃЮрЃЏрЃћрЃюрЃћрЃЉрЃў
  categories: {
    ai_operations: {
      name: "AI рЃЮрЃърЃћрЃарЃљрЃфрЃўрЃћрЃЉрЃў",
      description: "Gurulo рЃљрЃАрЃўрЃАрЃбрЃћрЃюрЃбрЃћрЃЉрЃўрЃА рЃЏрЃљрЃарЃЌрЃЋрЃљ рЃЊрЃљ рЃЎрЃЮрЃюрЃбрЃћрЃЦрЃАрЃбрЃўрЃА рЃюрЃљрЃЎрЃљрЃЊрЃћрЃЉрЃў",
      features: ["RAG рЃљрЃарЃ«рЃћрЃЉрЃў", "рЃърЃЮрЃЏрЃърЃбрЃўрЃА рЃЎрЃЮрЃюрЃбрЃарЃЮрЃџрЃў", "рЃАрЃћрЃАрЃўрЃћрЃЉрЃўрЃА рЃќрЃћрЃЊрЃљрЃЏрЃ«рЃћрЃЊрЃЋрЃћрЃџрЃЮрЃЉрЃљ", "auto-update рЃљрЃарЃ«рЃћрЃЉрЃў"]
    },
    observability: {
      name: "рЃЏрЃЮрЃюрЃўрЃбрЃЮрЃарЃўрЃюрЃњрЃў",
      description: "рЃАрЃўрЃАрЃбрЃћрЃЏрЃБрЃарЃў рЃ»рЃљрЃюрЃЏрЃарЃЌрЃћрЃџрЃЮрЃЉрЃўрЃА рЃЊрЃљ рЃерЃћрЃАрЃарЃБрЃџрЃћрЃЉрЃўрЃА рЃЏрЃћрЃЌрЃЋрЃљрЃџрЃДрЃБрЃарЃћрЃЮрЃЉрЃљ",
      features: ["SystemMonitoringDashboard", "PerformanceDashboard", "PostApplyHealthCheck", "watchdog рЃАрЃћрЃарЃЋрЃўрЃАрЃћрЃЉрЃў"]
    },
    security: {
      name: "рЃБрЃАрЃљрЃцрЃарЃЌрЃ«рЃЮрЃћрЃЉрЃљ",
      description: "WebAuthn, рЃЏрЃЮрЃгрЃДрЃЮрЃЉрЃўрЃџрЃЮрЃЉрЃћрЃЉрЃўрЃА рЃљрЃЏрЃЮрЃфрЃюрЃЮрЃЉрЃљ рЃЊрЃљ рЃБрЃАрЃљрЃцрЃарЃЌрЃ«рЃЮрЃћрЃЉрЃўрЃА рЃљрЃБрЃЊрЃўрЃбрЃў",
      features: ["Passkey рЃЏрЃ«рЃљрЃарЃЊрЃљрЃГрЃћрЃарЃљ", "DeviceManagement", "SecurityAuditTab", "Safety Switch"]
    },
    collaboration: {
      name: "рЃЌрЃљрЃюрЃљрЃЏрЃерЃарЃЮрЃЏрЃџрЃЮрЃЉрЃљ",
      description: "GitHub рЃўрЃюрЃбрЃћрЃњрЃарЃљрЃфрЃўрЃћрЃЉрЃў рЃЊрЃљ рЃАрЃљрЃћрЃарЃЌрЃЮ рЃАрЃљрЃЏрЃБрЃерЃљрЃЮ рЃўрЃюрЃАрЃбрЃарЃБрЃЏрЃћрЃюрЃбрЃћрЃЉрЃў",
      features: ["EnterpriseCollaboration", "GitHubManagement", "shared рЃџрЃЮрЃњрЃћрЃЉрЃў", "LiveProgressPanel"]
    }
  },

  // рЃбрЃћрЃЦрЃюрЃўрЃЎрЃБрЃарЃў рЃАрЃўрЃАрЃбрЃћрЃЏрЃћрЃЉрЃў
  technical_systems: {
    ai_orchestration: {
      name: "AI рЃЮрЃарЃЎрЃћрЃАрЃбрЃарЃљрЃфрЃўрЃљ",
      process: [
        "рЃЏрЃЮрЃЌрЃ«рЃЮрЃЋрЃюрЃўрЃА рЃЎрЃџрЃљрЃАрЃўрЃцрЃўрЃЎрЃљрЃфрЃўрЃљ Gurulo-рЃА рЃЏрЃўрЃћрЃа",
        "рЃЎрЃЮрЃюрЃбрЃћрЃЦрЃАрЃбрЃўрЃА рЃерЃћрЃЎрЃарЃћрЃЉрЃљ codeAnalyzer/fileService-рЃўрЃЌ",
        "рЃърЃЮрЃЏрЃърЃбрЃўрЃА рЃњрЃљрЃЏрЃЊрЃўрЃЊрЃарЃћрЃЉрЃљ рЃЊрЃљ рЃърЃЮрЃџрЃўрЃбрЃўрЃЎрЃўрЃА рЃерЃћрЃЏрЃЮрЃгрЃЏрЃћрЃЉрЃљ",
        "Groq рЃърЃљрЃАрЃБрЃ«рЃўрЃА рЃњрЃћрЃюрЃћрЃарЃљрЃфрЃўрЃљ",
        "рЃерЃћрЃЊрЃћрЃњрЃўрЃА рЃџрЃЮрЃњрЃўрЃарЃћрЃЉрЃљ рЃЊрЃљ рЃЏрЃЮрЃюрЃўрЃбрЃЮрЃарЃўрЃюрЃњрЃў"
      ]
    },
    monitoring: {
      name: "рЃЏрЃЮрЃюрЃўрЃбрЃЮрЃарЃўрЃюрЃњрЃўрЃА рЃАрЃўрЃАрЃбрЃћрЃЏрЃљ",
      components: [
        "SystemMonitoringDashboard", "PerformanceDashboard",
        "AutoUpdateMonitoringDashboard", "BackupSystemDashboard"
      ]
    },
    security: {
      name: "рЃБрЃАрЃљрЃцрЃарЃЌрЃ«рЃЮрЃћрЃЉрЃўрЃА рЃЏрЃљрЃарЃЌрЃЋрЃљ",
      roles: [
        "Operator - рЃДрЃЮрЃЋрЃћрЃџрЃЊрЃдрЃўрЃБрЃарЃў рЃЮрЃърЃћрЃарЃљрЃфрЃўрЃћрЃЉрЃў",
        "Admin - рЃљрЃЊрЃЏрЃўрЃюрЃўрЃАрЃбрЃарЃљрЃбрЃЮрЃарЃў",
        "Super Admin - рЃАрЃБрЃърЃћрЃа рЃљрЃЊрЃЏрЃўрЃюрЃўрЃАрЃбрЃарЃљрЃбрЃЮрЃарЃў"
      ]
    }
  },

  // рЃљрЃЊрЃЏрЃўрЃюрЃўрЃАрЃбрЃарЃљрЃфрЃўрЃБрЃџрЃў рЃцрЃБрЃюрЃЦрЃфрЃўрЃћрЃЉрЃў
  admin_features: {
    dashboard: "Operations Dashboard рЃарЃћрЃљрЃџрЃБрЃа рЃЊрЃарЃЮрЃерЃў рЃЏрЃћрЃбрЃарЃўрЃЎрЃћрЃЉрЃўрЃЌ",
    monitoring: "рЃЏрЃЮрЃюрЃўрЃбрЃЮрЃарЃўрЃюрЃњрЃўрЃА рЃърЃљрЃюрЃћрЃџрЃћрЃЉрЃў рЃЊрЃљ health-check-рЃћрЃЉрЃў",
    ai_control: "Gurulo рЃарЃЮрЃџрЃћрЃЉрЃўрЃА рЃЊрЃљ рЃЎрЃЮрЃюрЃбрЃћрЃЦрЃАрЃбрЃўрЃА рЃЏрЃљрЃарЃЌрЃЋрЃљ",
    security: "Passkey/WebAuthn рЃЏрЃЮрЃгрЃДрЃЮрЃЉрЃўрЃџрЃЮрЃЉрЃћрЃЉрЃўрЃА рЃЎрЃЮрЃюрЃбрЃарЃЮрЃџрЃў",
    audits: "SecurityAuditTab рЃЊрЃљ рЃџрЃЮрЃњрЃћрЃЉрЃўрЃА рЃљрЃюрЃљрЃџрЃўрЃќрЃў"
  },

  // рЃбрЃћрЃЦрЃюрЃЮрЃџрЃЮрЃњрЃўрЃБрЃарЃў рЃАрЃбрЃћрЃЎрЃў
  technologies: {
    frontend: "React + TypeScript + Tailwind CSS",
    backend: "Node.js + Express + Firebase",
    database: "Firestore (NoSQL)",
    auth: "Firebase Authentication & WebAuthn",
    ai: "Groq API (Llama models) + Gurulo Orchestration",
    deployment: "Replit Platform & Firebase"
  },

  // рЃФрЃўрЃарЃўрЃЌрЃљрЃЊрЃў рЃцрЃБрЃюрЃЦрЃфрЃўрЃћрЃЉрЃў
  core_features: [
    "рЃЮрЃърЃћрЃарЃљрЃфрЃўрЃБрЃџрЃў рЃЏрЃЮрЃюрЃўрЃбрЃЮрЃарЃўрЃюрЃњрЃў рЃЊрЃљ health-check-рЃћрЃЉрЃў",
    "AI рЃЎрЃЮрЃюрЃбрЃћрЃЦрЃАрЃбрЃўрЃА рЃЏрЃљрЃарЃЌрЃЋрЃљ рЃЊрЃљ RAG рЃюрЃљрЃЎрЃљрЃЊрЃћрЃЉрЃў",
    "рЃБрЃАрЃљрЃцрЃарЃЌрЃ«рЃЮрЃћрЃЉрЃљ Passkey/WebAuthn рЃАрЃљрЃерЃБрЃљрЃџрЃћрЃЉрЃўрЃЌ",
    "рЃЏрЃљрЃдрЃљрЃџрЃў рЃњрЃљрЃЏрЃбрЃљрЃарЃБрЃюрЃљрЃарЃўрЃљрЃюрЃЮрЃЉрЃўрЃА рЃџрЃЮрЃњрЃўрЃарЃћрЃЉрЃљ",
    "GitHub рЃЊрЃљ рЃерЃўрЃЊрЃљ рЃўрЃюрЃбрЃћрЃњрЃарЃљрЃфрЃўрЃћрЃЉрЃўрЃА рЃЏрЃ«рЃљрЃарЃЊрЃљрЃГрЃћрЃарЃљ",
    "Georgian-first UI/UX рЃЊрЃљ рЃЏрЃарЃљрЃЋрЃљрЃџрЃў рЃћрЃюрЃўрЃА рЃЏрЃ«рЃљрЃарЃЊрЃљрЃГрЃћрЃарЃљ",
    "рЃЊрЃљрЃфрЃЋрЃўрЃА рЃЊрЃљ рЃљрЃдрЃЊрЃњрЃћрЃюрЃўрЃА рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃўрЃќрЃўрЃарЃћрЃЉрЃБрЃџрЃў рЃЏрЃћрЃЦрЃљрЃюрЃўрЃќрЃЏрЃћрЃЉрЃў"
  ]
};

// Enhanced рЃњрЃљрЃюрЃАрЃљрЃќрЃдрЃЋрЃарЃБрЃџрЃў рЃерЃљрЃЉрЃџрЃЮрЃюрЃћрЃЉрЃў RAG рЃЮрЃърЃбрЃўрЃЏрЃўрЃќрЃљрЃфрЃўрЃўрЃАрЃЌрЃЋрЃўрЃА
const RESPONSE_TEMPLATES = {
  platform_overview: () => {
    return `­ЪЈћ№ИЈ **рЃЉрЃљрЃ«рЃЏрЃљрЃарЃЮрЃА AI рЃЮрЃърЃћрЃарЃљрЃфрЃўрЃћрЃЉрЃўрЃА рЃърЃџрЃљрЃбрЃцрЃЮрЃарЃЏрЃљ**

­ЪЊІ **рЃЮрЃърЃћрЃарЃљрЃфрЃўрЃБрЃџрЃў рЃЊрЃЮрЃЏрЃћрЃюрЃћрЃЉрЃў:**
Рђб ­Ъцќ AI рЃЮрЃърЃћрЃарЃљрЃфрЃўрЃћрЃЉрЃў - Gurulo рЃљрЃАрЃўрЃАрЃбрЃћрЃюрЃбрЃўрЃА рЃЏрЃљрЃарЃЌрЃЋрЃљ, рЃЎрЃЮрЃюрЃбрЃћрЃЦрЃАрЃбрЃўрЃА рЃњрЃљрЃюрЃљрЃ«рЃџрЃћрЃЉрЃљ рЃЊрЃљ RAG рЃљрЃарЃ«рЃћрЃЉрЃў
Рђб ­ЪЊѕ рЃЏрЃЮрЃюрЃўрЃбрЃЮрЃарЃўрЃюрЃњрЃў - SystemMonitoringDashboard, PerformanceDashboard рЃЊрЃљ health-check рЃЏрЃЮрЃЊрЃБрЃџрЃћрЃЉрЃў
Рђб ­Ъћљ рЃБрЃАрЃљрЃцрЃарЃЌрЃ«рЃЮрЃћрЃЉрЃљ - Passkey/WebAuthn, рЃЏрЃЮрЃгрЃДрЃЮрЃЉрЃўрЃџрЃЮрЃЉрЃўрЃА рЃљрЃЏрЃЮрЃфрЃюрЃЮрЃЉрЃљ, рЃБрЃАрЃљрЃцрЃарЃЌрЃ«рЃЮрЃћрЃЉрЃўрЃА рЃљрЃБрЃЊрЃўрЃбрЃўрЃА рЃЕрЃљрЃюрЃљрЃгрЃћрЃарЃћрЃЉрЃў
Рђб ­ЪцЮ рЃЌрЃљрЃюрЃљрЃЏрЃерЃарЃЮрЃЏрЃџрЃЮрЃЉрЃљ - GitHub рЃўрЃюрЃбрЃћрЃњрЃарЃљрЃфрЃўрЃћрЃЉрЃў, EnterpriseCollaboration рЃЊрЃљ рЃарЃћрЃљрЃџрЃБрЃа рЃЊрЃарЃЮрЃерЃў рЃџрЃЮрЃњрЃћрЃЉрЃўрЃА рЃњрЃљрЃќрЃўрЃљрЃарЃћрЃЉрЃљ

РџЎ№ИЈ **рЃЉрЃўрЃарЃЌрЃЋрЃБрЃџрЃў рЃАрЃћрЃарЃЋрЃўрЃАрЃћрЃЉрЃў:**
Рђб AI рЃЎрЃЮрЃюрЃбрЃарЃЮрЃџрЃћрЃарЃў рЃЊрЃљ Groq рЃўрЃюрЃбрЃћрЃњрЃарЃљрЃфрЃўрЃљ
Рђб рЃЮрЃърЃћрЃарЃљрЃфрЃўрЃћрЃЉрЃўрЃА рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃўрЃќрЃљрЃфрЃўрЃўрЃА task-рЃћрЃЉрЃў рЃЊрЃљ rollout рЃЎрЃЮрЃюрЃбрЃарЃЮрЃџрЃў
Рђб Health/diagnostics API-рЃћрЃЉрЃў рЃЊрЃљ watchdog рЃЏрЃЮрЃюрЃўрЃбрЃЮрЃарЃўрЃюрЃњрЃў
Рђб рЃљрЃарЃЦрЃўрЃЋрЃљрЃфрЃўрЃўрЃАрЃљ рЃЊрЃљ рЃЉрЃћрЃЦрЃљрЃцрЃўрЃА рЃЎрЃЮрЃюрЃбрЃарЃЮрЃџрЃў

­ЪћД **рЃбрЃћрЃЦрЃюрЃЮрЃџрЃЮрЃњрЃўрЃћрЃЉрЃў:**
Рђб Frontend: React + TypeScript + Tailwind CSS
Рђб Backend: Node.js + Express + Firebase
Рђб Database: Firestore (NoSQL)
Рђб AI: Groq API (Llama models) + Gurulo рЃЮрЃърЃћрЃарЃљрЃфрЃўрЃБрЃџрЃў рЃЎрЃЮрЃЏрЃърЃЮрЃќрЃўрЃбрЃЮрЃарЃў
Рђб Deployment: Replit Platform & Firebase`;
  },

  project_structure_detailed: () => {
    return `­ЪЈЌ№ИЈ **рЃърЃарЃЮрЃћрЃЦрЃбрЃўрЃА рЃЊрЃћрЃбрЃљрЃџрЃБрЃарЃў рЃАрЃбрЃарЃБрЃЦрЃбрЃБрЃарЃљ:**

­ЪЊЂ **Frontend Structure (ai-frontend/src/):**
Рђб components/ - UI рЃЎрЃЮрЃЏрЃърЃЮрЃюрЃћрЃюрЃбрЃћрЃЉрЃў (AIAssistantEnhanced.tsx, SystemMonitoringDashboard.tsx, PerformanceDashboard.tsx)
Рђб components/futuristic-chat/ - AIChatInterface.tsx, LiveAgentView.tsx, SessionSidebar.tsx
Рђб pages/ - GurulaManagementPage.tsx, DeviceManagement.tsx, AdminPasskeyLogin.tsx
Рђб services/ - adminAiApi.ts, loggingService.ts, integrationRegistryService.ts
Рђб utils/ - rateLimitHandler.ts, networkErrorDetection.ts, guruloCoreAdapter.ts

­ЪЊЂ **Backend Structure (backend/):**
Рђб ai_controller.js - AI рЃЏрЃЮрЃЌрЃ«рЃЮрЃЋрЃюрЃћрЃЉрЃўрЃА рЃЎрЃЮрЃюрЃбрЃарЃЮрЃџрЃћрЃарЃў рЃЊрЃљ рЃАрЃбрЃљрЃбрЃўрЃЎрЃБрЃарЃў рЃърЃљрЃАрЃБрЃ«рЃћрЃЉрЃў
Рђб services/ - site_summary.js, groq_service.js, codeAnalyzer.js, fileService.js
Рђб utils/ - rpid.js, georgianTermNormalizer рЃЊрЃљ рЃБрЃАрЃљрЃцрЃарЃЌрЃ«рЃЮрЃћрЃЉрЃўрЃА рЃЊрЃљрЃЏрЃ«рЃЏрЃљрЃарЃћ рЃцрЃБрЃюрЃЦрЃфрЃўрЃћрЃЉрЃў
Рђб routes/ - API endpoints рЃЊрЃљ middleware-рЃћрЃЉрЃў
Рђб config/ - WebAuthn рЃЊрЃљ рЃърЃџрЃљрЃбрЃцрЃЮрЃарЃЏрЃўрЃА рЃњрЃљрЃарЃћрЃЏрЃЮрЃА рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃљ

­ЪЊЂ **AI Service (ai-service/):**
Рђб core/ - task_manager.js, tool_registry.js, codexHelpers.js
Рђб services/ - diagnostics рЃЊрЃљ рЃърЃарЃЮрЃЏрЃърЃбрЃўрЃА рЃЏрЃћрЃюрЃћрЃ»рЃЏрЃћрЃюрЃбрЃў
Рђб server.js - рЃЏрЃўрЃЎрЃарЃЮрЃАрЃћрЃарЃЋрЃўрЃАрЃўрЃА entry point`;
  },

  component_mapping: () => {
    return `­ЪДЕ **рЃЎрЃЮрЃЏрЃърЃЮрЃюрЃћрЃюрЃбрЃћрЃЉрЃўрЃА рЃарЃБрЃЎрЃљ:**

­ЪЊІ **AI рЃЮрЃърЃћрЃарЃљрЃфрЃўрЃћрЃЉрЃў:**
Рђб AIAssistantEnhanced.tsx - рЃЏрЃЌрЃљрЃЋрЃљрЃарЃў AI рЃЮрЃърЃћрЃарЃљрЃфрЃўрЃћрЃЉрЃўрЃА рЃърЃљрЃюрЃћрЃџрЃў
Рђб AIChatInterface.tsx - рЃарЃћрЃљрЃџрЃБрЃа рЃЊрЃарЃЮрЃерЃў рЃЊрЃўрЃљрЃџрЃЮрЃњрЃўрЃА рЃўрЃюрЃбрЃћрЃарЃцрЃћрЃўрЃАрЃў
Рђб LiveProgressPanel.tsx - рЃАрЃћрЃАрЃўрЃўрЃА рЃърЃарЃЮрЃњрЃарЃћрЃАрЃўрЃА рЃљрЃдрЃарЃўрЃфрЃ«рЃЋрЃљ

­ЪЊІ **рЃЏрЃЮрЃюрЃўрЃбрЃЮрЃарЃўрЃюрЃњрЃў рЃЊрЃљ рЃљрЃюрЃљрЃџрЃўрЃбрЃўрЃЎрЃљ:**
Рђб SystemMonitoringDashboard.tsx - рЃўрЃюрЃцрЃарЃљрЃАрЃбрЃарЃБрЃЦрЃбрЃБрЃарЃўрЃА рЃАрЃбрЃљрЃбрЃБрЃАрЃў рЃЊрЃљ health рЃАрЃўрЃњрЃюрЃљрЃџрЃћрЃЉрЃў
Рђб PerformanceDashboard.tsx - latency/throughput рЃЏрЃћрЃбрЃарЃўрЃЎрЃћрЃЉрЃў
Рђб PostApplyHealthCheck.tsx - рЃњрЃљрЃюрЃљрЃ«рЃџрЃћрЃЉрЃўрЃА рЃерЃћрЃЏрЃЊрЃњрЃЮрЃЏрЃў рЃЋрЃљрЃџрЃўрЃЊрЃљрЃфрЃўрЃљ

­ЪЊІ **рЃљрЃЊрЃЏрЃўрЃюрЃўрЃАрЃбрЃарЃљрЃфрЃўрЃљ рЃЊрЃљ рЃБрЃАрЃљрЃцрЃарЃЌрЃ«рЃЮрЃћрЃЉрЃљ:**
Рђб GurulaManagementPage.tsx - Gurulo рЃљрЃАрЃўрЃАрЃбрЃћрЃюрЃбрЃћрЃЉрЃўрЃА рЃЏрЃљрЃарЃЌрЃЋрЃљ
Рђб DeviceManagement.tsx - рЃЏрЃЮрЃгрЃДрЃЮрЃЉрЃўрЃџрЃЮрЃЉрЃћрЃЉрЃўрЃА рЃЊрЃљ WebAuthn рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃљ
Рђб AdminLogs.tsx - рЃЮрЃърЃћрЃарЃљрЃфрЃўрЃБрЃџрЃў рЃџрЃЮрЃњрЃћрЃЉрЃўрЃАрЃљ рЃЊрЃљ рЃљрЃЦрЃбрЃўрЃЋрЃЮрЃЉрЃћрЃЉрЃўрЃА рЃюрЃљрЃ«рЃЋрЃљ`;
  },

  key_files_mapping: () => {
    return `­ЪЌѓ№ИЈ **рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЋрЃљрЃюрЃў рЃцрЃљрЃўрЃџрЃћрЃЉрЃўрЃА рЃарЃБрЃЎрЃљ:**

­Ъћ┤ **Core Files:**
Рђб ai-frontend/src/AIDashboardShell.tsx - рЃЏрЃЌрЃљрЃЋрЃљрЃарЃў рЃљрЃърЃџрЃўрЃЎрЃљрЃфрЃўрЃўрЃА рЃЕрЃљрЃарЃЕрЃЮ
Рђб backend/ai_controller.js - рЃфрЃћрЃюрЃбрЃарЃљрЃџрЃБрЃарЃў AI рЃЎрЃЮрЃюрЃбрЃарЃЮрЃџрЃћрЃарЃў
Рђб backend/services/site_summary.js - рЃАрЃбрЃљрЃбрЃўрЃЎрЃБрЃарЃў рЃЎрЃЮрЃюрЃбрЃћрЃЦрЃАрЃбрЃў рЃЊрЃљ RAG рЃарЃБрЃЎрЃћрЃЉрЃў
Рђб ai-service/server.js - Gurulo AI рЃЏрЃўрЃЎрЃарЃЮрЃАрЃћрЃарЃЋрЃўрЃАрЃў

­ЪЪА **Operational Logic:**
Рђб ai-frontend/src/components/SystemMonitoringDashboard.tsx - рЃЮрЃърЃћрЃарЃљрЃфрЃўрЃБрЃџрЃў рЃЏрЃћрЃбрЃарЃўрЃЎрЃћрЃЉрЃў
Рђб ai-frontend/src/services/adminAiApi.ts - рЃљрЃЊрЃЏрЃўрЃю API рЃЦрЃЮрЃџ-рЃљрЃБрЃЌрЃћрЃЉрЃў
Рђб backend/services/codeAnalyzer.js - RAG рЃцрЃљрЃўрЃџрЃћрЃЉрЃўрЃА рЃљрЃюрЃљрЃџрЃўрЃќрЃў
Рђб functions/src/routes/ai_chat.js - Firebase Functions рЃўрЃюрЃбрЃћрЃарЃцрЃћрЃўрЃАрЃў

­ЪЪб **Supporting Files:**
Рђб ai-frontend/src/utils/rateLimitHandler.ts - рЃЏрЃЮрЃЌрЃ«рЃЮрЃЋрЃюрЃћрЃЉрЃўрЃА рЃЎрЃЮрЃюрЃбрЃарЃЮрЃџрЃў
Рђб ai-frontend/src/utils/networkErrorDetection.ts - рЃЦрЃАрЃћрЃџрЃўрЃА рЃЊрЃўрЃљрЃњрЃюрЃЮрЃАрЃбрЃўрЃЎрЃљ
Рђб backend/utils/rpid.js - WebAuthn RPID рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃљ
Рђб ai-service/core/tool_registry.js - рЃўрЃюрЃАрЃбрЃарЃБрЃЏрЃћрЃюрЃбрЃћрЃЉрЃўрЃА рЃарЃћрЃњрЃўрЃАрЃбрЃарЃў

­Ъћх **Configuration Files:**
Рђб package.json - Dependencies
Рђб tsconfig.json - TypeScript рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃљ
Рђб firebase.json - Firebase deployment рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃћрЃЉрЃў
Рђб vite.config.mts - Frontend build рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃљ`;
  },

  operations_flow: () => {
    return `­ЪДГ **рЃЮрЃърЃћрЃарЃљрЃфрЃўрЃБрЃџрЃў рЃюрЃљрЃЎрЃљрЃЊрЃў:**

1№ИЈРЃБ **рЃЎрЃЋрЃћрЃЌрЃўрЃА рЃЎрЃџрЃљрЃАрЃўрЃцрЃўрЃЎрЃљрЃфрЃўрЃљ** - Gurulo рЃњрЃљрЃюрЃАрЃљрЃќрЃдрЃЋрЃарЃљрЃЋрЃА рЃЏрЃЮрЃЌрЃ«рЃЮрЃЋрЃюрЃўрЃА рЃбрЃўрЃърЃА рЃЊрЃљ рЃљрЃЏрЃЮрЃљрЃарЃЕрЃћрЃЋрЃА рЃерЃћрЃАрЃљрЃЉрЃљрЃЏрЃўрЃА рЃЏрЃЮрЃЊрЃБрЃџрЃА
2№ИЈРЃБ **рЃЎрЃЮрЃюрЃбрЃћрЃЦрЃАрЃбрЃўрЃА рЃљрЃњрЃћрЃЉрЃљ** - codeAnalyzer рЃЊрЃљ fileService рЃЦрЃЏрЃюрЃўрЃљрЃю рЃќрЃБрЃАрЃб рЃАрЃљрЃЏрЃБрЃерЃљрЃЮ рЃЎрЃЮрЃюрЃбрЃћрЃЦрЃАрЃбрЃА
3№ИЈРЃБ **рЃњрЃљрЃЊрЃљрЃЏрЃЮрЃгрЃЏрЃћрЃЉрЃљ** - рЃБрЃАрЃљрЃцрЃарЃЌрЃ«рЃЮрЃћрЃЉрЃўрЃА рЃгрЃћрЃАрЃћрЃЉрЃў, device recognition рЃЊрЃљ rate limiter-рЃћрЃЉрЃў рЃљрЃцрЃўрЃџрЃбрЃарЃљрЃЋрЃћрЃю рЃарЃўрЃАрЃЎрЃўрЃљрЃю рЃЏрЃЮрЃЦрЃЏрЃћрЃЊрЃћрЃЉрЃћрЃЉрЃА
4№ИЈРЃБ **рЃерЃћрЃАрЃарЃБрЃџрЃћрЃЉрЃљ** - AI рЃљрЃАрЃўрЃАрЃбрЃћрЃюрЃбрЃў рЃљрЃгрЃљрЃарЃЏрЃЮрЃћрЃЉрЃА рЃЏрЃЮрЃЌрЃ«рЃЮрЃЋрЃюрЃўрЃџ рЃЏрЃЮрЃЦрЃЏрЃћрЃЊрЃћрЃЉрЃљрЃА рЃљрЃю рЃърЃљрЃАрЃБрЃ«рЃА
5№ИЈРЃБ **рЃЏрЃЮрЃюрЃўрЃбрЃЮрЃарЃўрЃюрЃњрЃў** - SystemMonitoringDashboard/PostApplyHealthCheck рЃљрЃЊрЃћрЃЋрЃюрЃћрЃЉрЃА рЃЌрЃЋрЃљрЃџрЃА рЃАрЃбрЃљрЃбрЃБрЃАрЃА
6№ИЈРЃБ **рЃџрЃЮрЃњрЃўрЃарЃћрЃЉрЃљ** - AdminLogs рЃЊрЃљ loggingService рЃўрЃюрЃљрЃ«рЃљрЃЋрЃА рЃЊрЃћрЃбрЃљрЃџрЃБрЃа рЃЕрЃљрЃюрЃљрЃгрЃћрЃарЃћрЃЉрЃА`;
  },

  admin_panel: () => {
    return `­ЪЉеРђЇ­Ъњ╝ **рЃљрЃЊрЃЏрЃўрЃюрЃўрЃАрЃбрЃарЃљрЃфрЃўрЃБрЃџрЃў рЃърЃљрЃюрЃћрЃџрЃў:**

­ЪЊі **Operations Dashboard:**
Рђб рЃарЃћрЃљрЃџрЃБрЃа рЃЊрЃарЃЮрЃерЃў рЃАрЃбрЃљрЃбрЃБрЃАрЃў (рЃЎрЃЮрЃюрЃбрЃћрЃЦрЃАрЃбрЃў, рЃЏрЃЮрЃЊрЃћрЃџрЃћрЃЉрЃўрЃА рЃ«рЃћрЃџрЃЏрЃўрЃАрЃљрЃгрЃЋрЃЊрЃЮрЃЏрЃЮрЃЉрЃљ, рЃърЃарЃЮрЃфрЃћрЃАрЃћрЃЉрЃўрЃА рЃЏрЃЊрЃњрЃЮрЃЏрЃљрЃарЃћрЃЮрЃЉрЃљ)
Рђб Health/latency рЃЏрЃћрЃбрЃарЃўрЃЎрЃћрЃЉрЃў рЃЊрЃљ рЃЎрЃЮрЃюрЃбрЃарЃЮрЃџрЃў
Рђб рЃЏрЃЮрЃюрЃўрЃбрЃЮрЃарЃўрЃюрЃњрЃўрЃА рЃљрЃџрЃћрЃарЃбрЃћрЃЉрЃўрЃА рЃЏрЃљрЃарЃЌрЃЋрЃљ

­Ъћљ **рЃБрЃАрЃљрЃцрЃарЃЌрЃ«рЃЮрЃћрЃЉрЃўрЃА рЃЏрЃљрЃарЃЌрЃЋрЃљ:**
Рђб DeviceManagement.tsx - Passkey/WebAuthn рЃЏрЃЮрЃгрЃДрЃЮрЃЉрЃўрЃџрЃЮрЃЉрЃћрЃЉрЃўрЃА рЃарЃћрЃњрЃўрЃАрЃбрЃарЃљрЃфрЃўрЃљ
Рђб SecurityAuditTab.tsx - рЃљрЃБрЃЊрЃўрЃбрЃўрЃА рЃЕрЃљрЃюрЃљрЃгрЃћрЃарЃћрЃЉрЃўрЃА рЃюрЃљрЃ«рЃЋрЃљ
Рђб SafetySwitch рЃЏрЃЮрЃЊрЃБрЃџрЃў - рЃЏрЃљрЃдрЃљрЃџрЃарЃўрЃАрЃЎрЃўрЃљрЃюрЃў рЃЉрЃарЃФрЃљрЃюрЃћрЃЉрЃћрЃЉрЃўрЃА рЃЉрЃџрЃЮрЃЎрЃўрЃарЃћрЃЉрЃљ

­ЪДа **AI рЃЮрЃърЃћрЃарЃљрЃфрЃўрЃћрЃЉрЃў:**
Рђб GurulaManagementPage.tsx - Gurulo рЃљрЃЋрЃљрЃбрЃарЃћрЃЉрЃўрЃА/рЃарЃЮрЃџрЃћрЃЉрЃўрЃА рЃЏрЃљрЃарЃЌрЃЋрЃљ
Рђб AIMemoryManager.tsx - рЃЎрЃЮрЃюрЃбрЃћрЃЦрЃАрЃбрЃўрЃА рЃЏрЃћрЃ«рЃАрЃўрЃћрЃарЃћрЃЉрЃўрЃА рЃЎрЃЮрЃюрЃбрЃарЃЮрЃџрЃў
Рђб AIRolloutManager.tsx - рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃБрЃарЃў рЃњрЃљрЃюрЃљрЃ«рЃџрЃћрЃЉрЃўрЃА рЃљрЃарЃ«рЃћрЃЉрЃў`;
  },

  pricing_system: () => {
    return `­ЪЏА№ИЈ **Guardrail рЃАрЃўрЃАрЃбрЃћрЃЏрЃљ рЃЊрЃљ рЃерЃћрЃАрЃарЃБрЃџрЃћрЃЉрЃўрЃА рЃЎрЃЮрЃюрЃбрЃарЃЮрЃџрЃў:**

­ЪЊѕ **рЃЏрЃЮрЃюрЃўрЃбрЃЮрЃарЃўрЃюрЃњрЃўрЃА рЃбрЃўрЃърЃћрЃЉрЃў:**
Рђб PerformanceDashboard.tsx - latency рЃЊрЃљ throughput рЃќрЃдрЃЋрЃљрЃарЃў
Рђб AutoUpdateMonitoringDashboard.tsx - rollout рЃАрЃбрЃљрЃбрЃБрЃАрЃў рЃЊрЃљ rollback рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃћрЃЉрЃў
Рђб BackupSystemDashboard.tsx - рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃЌрЃљ рЃЊрЃљрЃфрЃЋрЃљ

РџЎ№ИЈ **рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃўрЃќрЃљрЃфрЃўрЃљ:**
Рђб rateLimitHandler.ts - рЃЏрЃЮрЃЌрЃ«рЃЮрЃЋрЃюрЃћрЃЉрЃўрЃА рЃЊрЃЮрЃќрЃўрЃарЃћрЃЉрЃљ
Рђб safety switch-рЃћрЃЉрЃў - рЃарЃўрЃАрЃЎрЃўрЃљрЃюрЃў рЃЉрЃарЃФрЃљрЃюрЃћрЃЉрЃћрЃЉрЃўрЃА рЃњрЃљрЃЕрЃћрЃарЃћрЃЉрЃљ
Рђб SystemCleanerService.ts - рЃЊрЃарЃЮрЃћрЃЉрЃўрЃЌрЃў рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃўрЃА рЃЏрЃљрЃарЃЌрЃЋрЃљ

­Ъј» **рЃЮрЃърЃћрЃарЃљрЃфрЃўрЃБрЃџрЃў рЃЏрЃўрЃќрЃюрЃћрЃЉрЃў:**
Рђб рЃЏрЃљрЃдрЃљрЃџрЃў рЃ«рЃћрЃџрЃЏрЃўрЃАрЃљрЃгрЃЋрЃЊрЃЮрЃЏрЃЮрЃЉрЃљ Gurulo-рЃАрЃЌрЃЋрЃўрЃА
Рђб рЃњрЃљрЃЏрЃГрЃЋрЃўрЃарЃЋрЃљрЃџрЃћ рЃџрЃЮрЃњрЃўрЃарЃћрЃЉрЃљ рЃЊрЃљ рЃљрЃБрЃЊрЃўрЃбрЃў
Рђб рЃБрЃАрЃљрЃцрЃарЃЌрЃ«рЃЮ рЃњрЃљрЃюрЃљрЃ«рЃџрЃћрЃЉрЃћрЃЉрЃў рЃЊрЃљ рЃАрЃгрЃарЃљрЃцрЃў рЃљрЃдрЃЊрЃњрЃћрЃюрЃљ`;
  }
};

const COMPONENT_SUMMARIES = {
  'AIAssistantEnhanced': 'AI рЃЮрЃърЃћрЃарЃљрЃфрЃўрЃћрЃЉрЃўрЃА рЃЏрЃЌрЃљрЃЋрЃљрЃарЃў рЃърЃљрЃюрЃћрЃџрЃў, рЃАрЃљрЃЊрЃљрЃф Gurulo рЃљрЃАрЃўрЃАрЃбрЃћрЃюрЃбрЃў рЃЏрЃљрЃарЃЌрЃљрЃЋрЃА рЃЎрЃЮрЃюрЃбрЃћрЃЦрЃАрЃбрЃА рЃЊрЃљ рЃърЃљрЃАрЃБрЃ«рЃћрЃЉрЃА.',
  'AIChatInterface': 'futuristic-chat рЃЏрЃЮрЃЊрЃБрЃџрЃўрЃА рЃўрЃюрЃбрЃћрЃарЃцрЃћрЃўрЃАрЃў рЃарЃћрЃљрЃџрЃБрЃа рЃЊрЃарЃЮрЃерЃў рЃЊрЃўрЃљрЃџрЃЮрЃњрЃћрЃЉрЃўрЃАрЃЌрЃЋрЃўрЃА рЃЊрЃљ developer рЃ«рЃћрЃџрЃАрЃљрЃгрЃДрЃЮрЃћрЃЉрЃўрЃАрЃЌрЃЋрЃўрЃА.',
  'SystemMonitoringDashboard': 'рЃўрЃюрЃцрЃарЃљрЃАрЃбрЃарЃБрЃЦрЃбрЃБрЃарЃўрЃА рЃЊрЃљ рЃАрЃћрЃарЃЋрЃўрЃАрЃћрЃЉрЃўрЃА рЃАрЃбрЃљрЃбрЃБрЃАрЃўрЃА рЃЋрЃўрЃќрЃБрЃљрЃџрЃўрЃќрЃљрЃфрЃўрЃљ рЃарЃћрЃљрЃџрЃБрЃа рЃЊрЃарЃЮрЃерЃў рЃЏрЃћрЃбрЃарЃўрЃЎрЃћрЃЉрЃўрЃЌ.',
  'PerformanceDashboard': 'рЃърЃћрЃарЃцрЃЮрЃарЃЏрЃљрЃюрЃАрЃўрЃА рЃЊрЃћрЃбрЃљрЃџрЃБрЃарЃў рЃЏрЃћрЃбрЃарЃўрЃЎрЃћрЃЉрЃў рЃЊрЃљ latency/throughput рЃЏрЃЮрЃюрЃўрЃбрЃЮрЃарЃўрЃюрЃњрЃў.',
  'GurulaManagementPage': 'Gurulo рЃљрЃАрЃўрЃАрЃбрЃћрЃюрЃбрЃћрЃЉрЃўрЃА, рЃарЃЮрЃџрЃћрЃЉрЃўрЃАрЃљ рЃЊрЃљ рЃърЃЮрЃџрЃўрЃбрЃўрЃЎрЃўрЃА рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃўрЃА рЃЏрЃљрЃарЃЌрЃЋрЃљ.',
  'DeviceManagement': 'Passkey/WebAuthn рЃЏрЃЮрЃгрЃДрЃЮрЃЉрЃўрЃџрЃЮрЃЉрЃћрЃЉрЃўрЃА рЃарЃћрЃњрЃўрЃАрЃбрЃарЃљрЃфрЃўрЃљ рЃЊрЃљ device recognition рЃЎрЃЮрЃюрЃбрЃарЃЮрЃџрЃў.',
  'AdminLogs': 'рЃЮрЃърЃћрЃарЃљрЃфрЃўрЃБрЃџрЃў рЃџрЃЮрЃњрЃћрЃЉрЃўрЃА, рЃљрЃБрЃЊрЃўрЃбрЃўрЃА рЃЕрЃљрЃюрЃљрЃгрЃћрЃарЃћрЃЉрЃўрЃАрЃљ рЃЊрЃљ рЃАрЃўрЃАрЃбрЃћрЃЏрЃБрЃарЃў рЃерЃћрЃбрЃДрЃЮрЃЉрЃўрЃюрЃћрЃЉрЃћрЃЉрЃўрЃА рЃфрЃћрЃюрЃбрЃарЃљрЃџрЃўрЃќрЃћрЃЉрЃБрЃџрЃў рЃюрЃљрЃ«рЃЋрЃљ.'
};

// Topic to modules mapping for targeted RAG analysis
const topicToModules = {
  ai_operations: [
    'AIAssistantEnhanced.tsx', 'AIChatInterface.tsx', 'AIMemoryManager.tsx',
    'GurulaManagementPage.tsx', 'ai_controller.js'
  ],
  monitoring: [
    'SystemMonitoringDashboard.tsx', 'PerformanceDashboard.tsx', 'AutoUpdateMonitoringDashboard.tsx',
    'PostApplyHealthCheck.tsx', 'ai-service/server.js'
  ],
  security: [
    'DeviceManagement.tsx', 'SecurityAuditTab.tsx', 'rpid.js',
    'ai_admin.js'
  ],
  collaboration: [
    'GitHubManagement', 'EnterpriseCollaboration.tsx', 'AdminLogs.tsx',
    'integrationRegistryService.ts'
  ],
};

class SiteSummary {
  // Get modules for specific topic
  static getModulesForTopic(topic) {
    return topicToModules[topic] || [];
  }

  // Get all available topics
  static getAvailableTopics() {
    return Object.keys(topicToModules);
  }

  // Check if query is asking for static information
  isStaticInfoQuery(message) {
    const staticQueries = [
      'рЃАрЃљрЃўрЃбрЃўрЃА рЃАрЃарЃБрЃџрЃў рЃўрЃюрЃцрЃЮрЃарЃЏрЃљрЃфрЃўрЃљ',
      'рЃърЃџрЃљрЃбрЃцрЃЮрЃарЃЏрЃўрЃА рЃЊрЃћрЃбрЃљрЃџрЃћрЃЉрЃў', 
      'рЃњрЃљрЃюрЃАрЃљрЃќрЃдрЃЋрЃарЃБрЃџрЃў рЃўрЃюрЃцрЃЮрЃарЃЏрЃљрЃфрЃўрЃљ',
      'рЃЕрЃћрЃЏрЃў рЃАрЃљрЃўрЃбрЃўрЃА рЃљрЃдрЃгрЃћрЃарЃљ',
      'рЃарЃЮрЃњрЃЮрЃа рЃЏрЃБрЃерЃљрЃЮрЃЉрЃА рЃЕрЃћрЃЏрЃў рЃАрЃљрЃўрЃбрЃў',
      'рЃърЃџрЃљрЃбрЃцрЃЮрЃарЃЏрЃўрЃА рЃАрЃбрЃарЃБрЃЦрЃбрЃБрЃарЃљ',
      'рЃЉрЃљрЃ«рЃЏрЃљрЃарЃЮрЃА рЃАрЃўрЃАрЃбрЃћрЃЏрЃљ',
      'рЃЏрЃЮрЃЎрЃџрЃћ рЃерЃћрЃ»рЃљрЃЏрЃћрЃЉрЃљ',
      'bullet point рЃўрЃюрЃцрЃЮрЃарЃЏрЃљрЃфрЃўрЃљ'
    ];

    const lowerMessage = message.toLowerCase();
    return staticQueries.some(query => lowerMessage.includes(query.toLowerCase()));
  }
}

// Enhanced рЃФрЃўрЃарЃўрЃЌрЃљрЃЊрЃў рЃћрЃЦрЃАрЃърЃЮрЃарЃбрЃў RAG рЃЮрЃърЃбрЃўрЃЏрЃўрЃќрЃљрЃфрЃўрЃўрЃАрЃЌрЃЋрЃўрЃА
const fs = require('fs');
const path = require('path');

module.exports = {
  BAKHMARO_PLATFORM_INFO,
  RESPONSE_TEMPLATES,

  // Enhanced Helper рЃцрЃБрЃюрЃЦрЃфрЃўрЃљ рЃЎрЃЮрЃюрЃЎрЃарЃћрЃбрЃБрЃџрЃў рЃўрЃюрЃцрЃЮрЃарЃЏрЃљрЃфрЃўрЃўрЃАрЃЌрЃЋрЃўрЃА
  getStaticResponse: (queryType) => {
    const templates = RESPONSE_TEMPLATES;

    switch (queryType.toLowerCase()) {
      case 'platform_overview':
      case 'site_info':
      case 'full_info':
        return templates.platform_overview();

      case 'project_structure_detailed':
      case 'project_structure':
      case 'structure_detailed':
        return templates.project_structure_detailed();

      case 'component_mapping':
      case 'components_overview':
        return templates.component_mapping();

      case 'key_files_mapping':
      case 'important_files':
        return templates.key_files_mapping();

      case 'operations_flow':
      case 'operations_overview':
        return templates.operations_flow();

      case 'admin_panel':
      case 'admin_features':
        return templates.admin_panel();

      case 'pricing_system':
      case 'pricing_info':
        return templates.pricing_system();

      default:
        return null;
    }
  },

  // NEW: RAG-specific query classification helper
  classifyForRAG: (message) => {
    const lowerMessage = message.toLowerCase();

    const ragPatterns = {
      'needs_multi_stage': [
        'рЃЏрЃЌрЃћрЃџрЃў рЃАрЃљрЃўрЃбрЃўрЃА рЃерЃћрЃАрЃљрЃ«рЃћрЃЉ', 'рЃАрЃарЃБрЃџрЃў рЃЊрЃћрЃбрЃљрЃџрЃБрЃарЃў рЃўрЃюрЃцрЃЮрЃарЃЏрЃљрЃфрЃўрЃљ', 'рЃДрЃЋрЃћрЃџрЃљрЃцрЃћрЃарЃў рЃарЃљрЃф рЃљрЃарЃўрЃА',
        'рЃърЃарЃЮрЃћрЃЦрЃбрЃўрЃА рЃАрЃарЃБрЃџрЃў рЃљрЃюрЃљрЃџрЃўрЃќрЃў', 'рЃЏрЃЌрЃџрЃўрЃљрЃюрЃў рЃАрЃўрЃАрЃбрЃћрЃЏрЃўрЃА рЃљрЃдрЃгрЃћрЃарЃљ'
      ],
      'needs_structure_focus': [
        'рЃАрЃбрЃарЃБрЃЦрЃбрЃБрЃарЃљ', 'рЃљрЃарЃЦрЃўрЃбрЃћрЃЦрЃбрЃБрЃарЃљ', 'рЃЮрЃарЃњрЃљрЃюрЃўрЃќрЃљрЃфрЃўрЃљ', 'рЃЊрЃўрЃарЃћрЃЦрЃбрЃЮрЃарЃўрЃћрЃЉрЃў',
        'рЃцрЃЮрЃџрЃЊрЃћрЃарЃћрЃЉрЃў', 'рЃцрЃљрЃўрЃџрЃћрЃЉрЃўрЃА рЃњрЃљрЃюрЃџрЃљрЃњрЃћрЃЉрЃљ'
      ],
      'needs_component_focus': [
        'рЃЎрЃЮрЃЏрЃърЃЮрЃюрЃћрЃюрЃбрЃћрЃЉрЃў', 'рЃЏрЃЮрЃЊрЃБрЃџрЃћрЃЉрЃў', 'рЃАрЃћрЃарЃЋрЃўрЃАрЃћрЃЉрЃў', 'React рЃЎрЃЮрЃЏрЃърЃЮрЃюрЃћрЃюрЃбрЃћрЃЉрЃў',
        'рЃцрЃБрЃюрЃЦрЃфрЃўрЃЮрЃюрЃљрЃџрЃў', 'UI рЃћрЃџрЃћрЃЏрЃћрЃюрЃбрЃћрЃЉрЃў'
      ],
      'needs_code_analysis': [
        'рЃЎрЃЮрЃЊрЃўрЃА рЃљрЃюрЃљрЃџрЃўрЃќрЃў', 'рЃцрЃБрЃюрЃЦрЃфрЃўрЃћрЃЉрЃў', 'рЃўрЃЏрЃърЃџрЃћрЃЏрЃћрЃюрЃбрЃљрЃфрЃўрЃљ', 'рЃљрЃџрЃњрЃЮрЃарЃўрЃЌрЃЏрЃћрЃЉрЃў',
        'рЃџрЃЮрЃњрЃўрЃЎрЃљ', 'рЃарЃЮрЃњрЃЮрЃа рЃЏрЃБрЃерЃљрЃЮрЃЉрЃА рЃЎрЃЮрЃюрЃЎрЃарЃћрЃбрЃБрЃџрЃљрЃЊ'
      ]
    };

    for (const [type, patterns] of Object.entries(ragPatterns)) {
      if (patterns.some(pattern => lowerMessage.includes(pattern))) {
        return type;
      }
    }

    return 'general_rag';
  },

  // NEW: Get pre-built context for specific file types
  getPreBuiltContextForFiles: (fileTypes) => {
    const fileContexts = {
      'ai_operations': {
        description: 'AI рЃЮрЃърЃћрЃарЃљрЃфрЃўрЃћрЃЉрЃўрЃА рЃфрЃћрЃюрЃбрЃарЃљрЃџрЃБрЃарЃў рЃцрЃљрЃўрЃџрЃћрЃЉрЃў рЃЊрЃљ Gurulo рЃЎрЃЮрЃюрЃбрЃарЃЮрЃџрЃў',
        keyFeatures: ['RAG рЃЎрЃЮрЃюрЃбрЃћрЃЦрЃАрЃбрЃў', 'рЃърЃЮрЃЏрЃърЃбрЃўрЃА рЃЏрЃљрЃарЃЌрЃЋрЃљ', 'auto-update рЃљрЃарЃ«рЃћрЃЉрЃў'],
        relatedFiles: ['ai-frontend/src/components/AIAssistantEnhanced.tsx', 'backend/ai_controller.js', 'backend/services/codeAnalyzer.js']
      },
      'monitoring': {
        description: 'рЃЏрЃЮрЃюрЃўрЃбрЃЮрЃарЃўрЃюрЃњрЃўрЃАрЃљ рЃЊрЃљ health-check рЃАрЃўрЃАрЃбрЃћрЃЏрЃўрЃА рЃцрЃљрЃўрЃџрЃћрЃЉрЃў',
        keyFeatures: ['Realtime metrics', 'post-apply рЃЋрЃљрЃџрЃўрЃЊрЃљрЃфрЃўрЃљ', 'watchdog рЃАрЃћрЃарЃЋрЃўрЃАрЃћрЃЉрЃў'],
        relatedFiles: ['ai-frontend/src/components/SystemMonitoringDashboard.tsx', 'ai-frontend/src/components/PostApplyHealthCheck.tsx', 'ai-frontend/src/components/AutoUpdateMonitoringDashboard.tsx']
      },
      'security': {
        description: 'рЃБрЃАрЃљрЃцрЃарЃЌрЃ«рЃЮрЃћрЃЉрЃўрЃА рЃЊрЃљ рЃљрЃБрЃЊрЃўрЃбрЃўрЃА рЃцрЃљрЃўрЃџрЃћрЃЉрЃў',
        keyFeatures: ['Passkey/WebAuthn', 'device recognition', 'audit trails'],
        relatedFiles: ['ai-frontend/src/pages/DeviceManagement.tsx', 'ai-frontend/src/components/SecurityAuditTab.tsx', 'backend/utils/rpid.js']
      },
      'collaboration': {
        description: 'рЃЌрЃљрЃюрЃљрЃЏрЃерЃарЃЮрЃЏрЃџрЃЮрЃЉрЃўрЃАрЃљ рЃЊрЃљ рЃўрЃюрЃбрЃћрЃњрЃарЃљрЃфрЃўрЃћрЃЉрЃўрЃА рЃцрЃљрЃўрЃџрЃћрЃЉрЃў',
        keyFeatures: ['GitHub рЃЏрЃљрЃарЃЌрЃЋрЃљ', 'рЃџрЃЮрЃњрЃћрЃЉрЃўрЃА рЃњрЃљрЃќрЃўрЃљрЃарЃћрЃЉрЃљ', 'integration registry'],
        relatedFiles: ['ai-frontend/src/components/GitHubManagement', 'ai-frontend/src/components/AdminLogs.tsx', 'ai-frontend/src/services/integrationRegistryService.ts']
      }
    };

    return fileTypes.map(type => fileContexts[type]).filter(Boolean);
  },

  // NEW: Get token-optimized summary
  getTokenOptimizedSummary: (maxTokens = 500) => {
    const baseInfo = BAKHMARO_PLATFORM_INFO;
    let summary = `­ЪЈћ№ИЈ рЃЉрЃљрЃ«рЃЏрЃљрЃарЃЮрЃА AI рЃЮрЃърЃћрЃарЃљрЃфрЃўрЃћрЃЉрЃўрЃА рЃърЃџрЃљрЃбрЃцрЃЮрЃарЃЏрЃљ\n\n`;

    if (maxTokens > 200) {
      summary += `­ЪЊІ рЃЊрЃЮрЃЏрЃћрЃюрЃћрЃЉрЃў: AI рЃЮрЃърЃћрЃарЃљрЃфрЃўрЃћрЃЉрЃў, рЃЏрЃЮрЃюрЃўрЃбрЃЮрЃарЃўрЃюрЃњрЃў, рЃБрЃАрЃљрЃцрЃарЃЌрЃ«рЃЮрЃћрЃЉрЃљ, рЃЌрЃљрЃюрЃљрЃЏрЃерЃарЃЮрЃЏрЃџрЃЮрЃЉрЃљ\n`;
      summary += `РџЎ№ИЈ рЃўрЃюрЃцрЃарЃљрЃАрЃбрЃарЃБрЃЦрЃбрЃБрЃарЃљ: React/TypeScript + Node.js/Express + Firebase + Groq\n`;
      summary += `­Ъцќ AI: Gurulo orchestration + RAG pipeline-рЃћрЃЉрЃў\n`;
    }

    if (maxTokens > 300) {
      summary += `­ЪћД рЃЉрЃўрЃарЃЌрЃЋрЃБрЃџрЃў рЃАрЃћрЃарЃЋрЃўрЃАрЃћрЃЉрЃў: codeAnalyzer, task_manager, watchdog рЃЊрЃљ backup рЃЏрЃЮрЃЊрЃБрЃџрЃћрЃЉрЃў\n`;
    }

    if (maxTokens > 400) {
      summary += `­Ъћљ рЃБрЃАрЃљрЃцрЃарЃЌрЃ«рЃЮрЃћрЃЉрЃўрЃА рЃћрЃџрЃћрЃЏрЃћрЃюрЃбрЃћрЃЉрЃў: Passkey/WebAuthn, device recognition, audit logs\n`;
      summary += `­ЪЊА рЃЏрЃЮрЃюрЃўрЃбрЃЮрЃарЃўрЃюрЃњрЃў: SystemMonitoringDashboard, PerformanceDashboard, AutoUpdateMonitoringDashboard\n`;
    }

    return summary;
  },

  // рЃќрЃЮрЃњрЃљрЃЊрЃў рЃърЃџрЃљрЃбрЃцрЃЮрЃарЃЏрЃўрЃА рЃўрЃюрЃцрЃЮрЃарЃЏрЃљрЃфрЃўрЃљ
  getPlatformInfo: () => BAKHMARO_PLATFORM_INFO,

  // Enhanced рЃерЃћрЃЏрЃЮрЃгрЃЏрЃћрЃЉрЃљ - рЃљрЃарЃўрЃА рЃЌрЃБ рЃљрЃарЃљ рЃЎрЃўрЃЌрЃ«рЃЋрЃљ "рЃАрЃбрЃљрЃбрЃўрЃЎрЃБрЃарЃў" рЃбрЃўрЃърЃўрЃА
  isStaticInfoQuery: (message) => {
    const staticQueries = [
      'рЃАрЃљрЃўрЃбрЃўрЃА рЃАрЃарЃБрЃџрЃў рЃўрЃюрЃцрЃЮрЃарЃЏрЃљрЃфрЃўрЃљ',
      'рЃърЃџрЃљрЃбрЃцрЃЮрЃарЃЏрЃўрЃА рЃЊрЃћрЃбрЃљрЃџрЃћрЃЉрЃў', 
      'рЃњрЃљрЃюрЃАрЃљрЃќрЃдрЃЋрЃарЃБрЃџрЃў рЃўрЃюрЃцрЃЮрЃарЃЏрЃљрЃфрЃўрЃљ',
      'рЃЕрЃћрЃЏрЃў рЃАрЃљрЃўрЃбрЃўрЃА рЃљрЃдрЃгрЃћрЃарЃљ',
      'рЃарЃЮрЃњрЃЮрЃа рЃЏрЃБрЃерЃљрЃЮрЃЉрЃА рЃЕрЃћрЃЏрЃў рЃАрЃљрЃўрЃбрЃў',
      'рЃърЃџрЃљрЃбрЃцрЃЮрЃарЃЏрЃўрЃА рЃАрЃбрЃарЃБрЃЦрЃбрЃБрЃарЃљ',
      'рЃЉрЃљрЃ«рЃЏрЃљрЃарЃЮрЃА рЃАрЃўрЃАрЃбрЃћрЃЏрЃљ',
      'рЃЏрЃЮрЃЎрЃџрЃћ рЃерЃћрЃ»рЃљрЃЏрЃћрЃЉрЃљ',
      'bullet point рЃўрЃюрЃцрЃЮрЃарЃЏрЃљрЃфрЃўрЃљ'
    ];

    const lowerMessage = message.toLowerCase();
    return staticQueries.some(query => lowerMessage.includes(query.toLowerCase()));
  },

  // NEW: Check if query requires multi-stage processing
  requiresMultiStageRAG: (message) => {
    const multiStageIndicators = [
      'рЃЏрЃЌрЃћрЃџрЃў рЃАрЃљрЃўрЃбрЃўрЃА рЃерЃћрЃАрЃљрЃ«рЃћрЃЉ рЃЊрЃљрЃгрЃЋрЃарЃўрЃџрЃћрЃЉрЃўрЃЌрЃў рЃўрЃюрЃцрЃЮрЃарЃЏрЃљрЃфрЃўрЃљ',
      'рЃАрЃарЃБрЃџрЃў рЃърЃарЃЮрЃћрЃЦрЃбрЃўрЃА рЃљрЃюрЃљрЃџрЃўрЃќрЃў',
      'рЃДрЃЋрЃћрЃџрЃљрЃцрЃћрЃарЃў рЃарЃљрЃф рЃљрЃарЃўрЃА',
      'рЃЊрЃћрЃбрЃљрЃџрЃБрЃарЃў рЃљрЃдрЃгрЃћрЃарЃљ рЃЏрЃЌрЃћрЃџрЃў рЃърЃџрЃљрЃбрЃцрЃЮрЃарЃЏрЃўрЃА',
      'рЃЎрЃЮрЃЏрЃърЃџрЃћрЃЦрЃАрЃБрЃарЃў рЃљрЃюрЃљрЃџрЃўрЃќрЃў',
      'comprehensive analysis'
    ];

    const lowerMessage = message.toLowerCase();
    return multiStageIndicators.some(indicator => lowerMessage.includes(indicator));
  },

  // Get modules for specific topic
  getModulesForTopic: (topic) => {
    return SiteSummary.getModulesForTopic(topic);
  },

  // Get all available topics
  getAvailableTopics: () => {
    return SiteSummary.getAvailableTopics();
  }
};
