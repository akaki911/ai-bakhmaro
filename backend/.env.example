# ==========================================================
# üß± BACKEND SERVICE ENVIRONMENT (ai-bakhmaro/backend)
# Copy to backend/.env or backend/.env.production
# Replace CHANGE_ME placeholders with real credentials.
# ==========================================================


# ==========================================================
# ‚öôÔ∏è CORE RUNTIME CONFIGURATION
# ==========================================================
NODE_ENV=production
PORT=5002
BACKEND_HOST=0.0.0.0
FRONTEND_URL=https://ai.bakhmaro.co
ALLOWED_ORIGINS=https://ai.bakhmaro.co,https://api.ai.bakhmaro.co,http://localhost:5173
ALLOWED_ORIGINS_EXTRA=
DEPLOYMENT_URL=https://ai.bakhmaro.co
DEBUG_LEVEL=info
DEV_TASKS_ENABLED=false
PACKAGE_MANAGER=npm
API_BASE=https://api.ai.bakhmaro.co


# ==========================================================
# üîê SESSIONS & AUTHENTICATION
# ==========================================================
SESSION_SECRET=bk_prod_session_secret_6f1c0d24f2e9489b8e548e2e4c3128b1
SESSION_STORE=firestore
SESSION_TTL_HOURS=8
SESSION_IDLE_TIMEOUT=120
FIRESTORE_SESSION_COLLECTION=express-sessions
COOKIE_DOMAIN=.ai.bakhmaro.co
ADMIN_SETUP_TOKEN=bk_admin_setup_token_2025
ADMIN_ALLOWED_PERSONAL_ID=01019062020
AI_SERVICE_TOKEN=bk_ai_service_token_c9e4a2f7b1d6835e0c4a9f2176b3d0fa


# ==========================================================
# ü§ñ AI MICROSERVICE CONNECTIVITY
# ==========================================================
AI_SERVICE_URL=https://api.ai.bakhmaro.co/api/ai
AI_SERVICE_SECRET=bk_ai_service_token_c9e4a2f7b1d6835e0c4a9f2176b3d0fa
AI_INTERNAL_TOKEN=bk_ai_internal_token_4d2f9c1ab7e84c5f93a17e60c2d5f8b7
GROQ_API_KEY=gsk_prod_bakhmaro_placeholder
OPENAI_API_KEY=sk-prod-bakhmaro-placeholder
CACHE_TTL=3600
CACHE_MAX_SIZE=1000


# ==========================================================
# üß† ADVANCED AI GOVERNANCE & WORKFLOWS
# ==========================================================
# Comma-separated list of personal IDs allowed to manage AI tooling.
AI_AUTHORIZED_PERSONAL_IDS=01019062020,01019062030
# Token that grants access to the AI control panel UI (32+ characters).
AI_PANEL_TOKEN=bk_ai_panel_token_0f2d3c4a5b6d7e8f9a0b1c2d3e4f5a6b
# Shared service key used by automated smoke and test harnesses.
TEST_SERVICE_KEY=bk_test_service_key_2025
# Alternate frontend URL for preview deployments or fallback UI.
ALT_FRONTEND_URL=https://staging.ai.bakhmaro.co
# Allow anonymous users to initiate AI chat sessions (true/false).
ALLOW_ANONYMOUS_AI_CHAT=false
# Streaming mode for proxy responses (options: chunked, buffered).
AI_PROXY_STREAMING_MODE=chunked
# Enable heuristic-based routing of AI requests (true/false).
AI_SMART_ROUTING=true
# Comma-separated glob patterns treated as complex files requiring routing safeguards.
AI_SMART_ROUTING_COMPLEX_FILES=**/*.sql,**/*.ipynb,docs/architecture/*.md
# Risk levels that trigger enhanced review (comma-separated).
AI_SMART_ROUTING_COMPLEX_RISK_LEVELS=high,critical
# Require human-in-the-loop approvals before executing high-impact actions (true/false).
AI_HITL_APPROVALS=true
# Collect user feedback for continuous improvement loops (true/false).
AI_FEEDBACK_LOOP=true
# Operating mode for assistant orchestration (options: hybrid, autonomous, manual).
ASSISTANT_MODE=hybrid
# Token CI pipelines use to authenticate against the secrets check endpoint.
CI_SECRETS_CHECK_TOKEN=ci_secrets_check_token_2025
# Persist enriched metadata alongside AI session records (true/false).
ENABLE_METADATA=true
# Toggle rollout proxying for staged AI experiments (true/false).
ENABLE_AI_ROLLOUT_PROXY=false


# ==========================================================
# üß© OBSERVABILITY & MONITORING
# ==========================================================
JAEGER_ENDPOINT=https://ai.bakhmaro.co/jaeger/api/traces
BACKEND_METRICS_PORT=9092


# ==========================================================
# ü™µ ACTIVITY LOGGING & RATE LIMITING
# ==========================================================
ENABLE_ACTIVITY_PERSIST=1
ACTIVITY_HMAC_SECRET=bk_activity_hmac_secret_2025
ACTIVITY_HMAC_MAX_SKEW_MS=60000
ACTIVITY_ROTATE_MB=10
ACTIVITY_HEARTBEAT_MS=25000
DEV_BYPASS_RATE_LIMIT=false


# ==========================================================
# üõ°Ô∏è SECURITY
# ==========================================================
ENABLE_SECURITY_LOGGING=true
ALLOWED_USER_AGENTS=Chrome,Firefox,Safari,Edge
IP_WHITELIST_ENABLED=false
IP_WHITELIST=127.0.0.1/32
AUDIT_HASH_SECRET=bk_audit_hash_secret_2025
SECRETS_ENC_KEY=roLNiPdJFX9k9wt2QDNGxpFxNgaHX1BHG1P1Xli5pSw=


# ==========================================================
# üìß NOTIFICATIONS
# ==========================================================
NOTIFICATION_EMAIL_ENABLED=false
NOTIFICATION_EMAIL_RECIPIENTS=alerts@ai.bakhmaro.co
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=notifications@ai.bakhmaro.co
SMTP_PASS=bk_smtp_pass_placeholder
NOTIFICATION_WEBHOOKS_ENABLED=false
NOTIFICATION_WEBHOOK_URLS=
NOTIFICATION_WEBHOOK_SECRET=bk_notification_webhook_secret_2025
NOTIFICATION_WEBHOOK_TIMEOUT=10000
NOTIFICATION_EVENTS=proposal_created,applied,smoke_failed,rollback_done
NOTIFICATION_RATE_LIMIT=100
NOTIFICATION_RETRY_ATTEMPTS=3
NOTIFICATION_RETRY_BACKOFF=5000


# ==========================================================
# üíª DEVICE FINGERPRINTS & ROLLOUT STRATEGY
# ==========================================================
DEVICE_FINGERPRINT_SALT=bk_device_fingerprint_salt_2025
AI_ROLLOUT=blue
AI_ROLLOUT_PERCENTAGE=100
AI_ROLLOUT_USER_GROUPS=


# ==========================================================
# üîê WEBAUTHN RELYING PARTY CONFIGURATION
# ==========================================================
WEBAPP_RP_NAME=Bakhmaro Cottages
RP_ID=ai.bakhmaro.co
ORIGIN=https://ai.bakhmaro.co


# ==========================================================
# üß© GITHUB INTEGRATION
# ==========================================================
GITHUB_INTEGRATION_ENABLED=false
GITHUB_OAUTH_URL=https://github.com/login/oauth/authorize


# ==========================================================
# üî• FIREBASE ADMIN CREDENTIALS
# ==========================================================
FIREBASE_PROJECT_ID=ai-bakhmaro
FIREBASE_ADMIN_KEY=bk_firebase_admin_api_key_2025
FIREBASE_SERVICE_ACCOUNT_KEY={"type":"service_account","project_id":"ai-bakhmaro","private_key_id":"bkfirebaseprivatekeyid2025","private_key":"-----BEGIN PRIVATE KEY-----\\nbk_ai_bakhmaro_private_key\\n-----END PRIVATE KEY-----\\n","client_email":"firebase-adminsdk-fbsvc@ai-bakhmaro.iam.gserviceaccount.com","client_id":"123456789012345678901"}
FIREBASE_CLIENT_EMAIL=firebase-adminsdk-fbsvc@ai-bakhmaro.iam.gserviceaccount.com
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nbk_ai_bakhmaro_private_key\n-----END PRIVATE KEY-----\n"


# ==========================================================
# üß≠ DEPLOYMENT / REPLIT (OPTIONAL)
# ==========================================================
REPLIT_DEV_DOMAIN=
REPLIT_DOMAIN=
REPLIT_DOMAINS=
REPLIT_CLUSTER=
